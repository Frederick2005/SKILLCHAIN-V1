<!DOCTYPE html>
<html>
<head>
<title>Login</title>
<style>
    body{background:#128c7e;font-family:Arial;display:flex;justify-content:center;margin-top:100px;}
    .box{background:white;padding:20px;border-radius:10px;width:300px;text-align:center;}
    input{width:90%;padding:10px;margin:8px;border-radius:5px;border:1px solid #ccc;}
    button{padding:10px 20px;background:#25d366;color:white;border:none;border-radius:5px;font-weight:bold;}
</style>
</head>
<body>
<div class="box">
    <h2>Study Chat Login</h2>
    <input id="user" placeholder="Username">
    <input id="pass" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <p>or <a href="#" onclick="register()">Register</a></p>
</div>
<script>
const API="http://localhost:5000";

function login(){
    fetch(`${API}/login`,{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({username:user.value,password:pass.value})})
    .then(r=>r.json()).then(d=>{
        if(d.status==='ok'){ localStorage.username=d.username; window.location='chat.html'; }
        else alert('Invalid login');
    });
}

function register(){
    fetch(`${API}/register`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:user.value,password:pass.value})})
    .then(r=>r.json()).then(d=>{
        if(d.status==='ok') alert('Account created! Login now.');
        else alert('Username exists');
    })
}
</script>
</body>
</html>
